# 开源课记录

## 开源是什么

开源软件的10个特征(Open Source Definition), 要都符合才是开源软件. 不是仅仅把源代码公开就是开源.

OSD由<debian自由软件指导方针>发展而来

- 开源是一种开放协作的模式
- 开源是一种开放社区的行为模式
- 开源的背后是一种心理学现象
- 开源的成功, 依赖于法律条款的保障
- 开源的崛起, 在于商业企业终于意识到开源的威力

## 开源出现之前

出于教学和学术目的, 交流各种代码

### 黑客伦理

- 对计算机的访问(以及任何可能帮助你认识我们这个世界的事物)应该是不受限制的, 完全的. 任何人都有动手尝试的权利.

- 所有的信息应该可以自由获取

- 不迷信权威

- 评判黑客的标准应该是他们的技术, 而不是那些没有实际用途的指标, 比如学位,年龄,种族或职位.

## 开源出现

Unix闭源, 商业公司纷纷成立: 收费昂贵, 互不兼容, 闭源

GNU/Linux: 1985年Stallman发表GNU宣言, 1989年起草GPL. 1991年linus发表linux最初版本. FreeBSD起始于1993年.

- 通过互联网聚集大量志愿者, 没有严格的质量标准, 没有强有力的机构协调管理
- 最简策略: 每周发布, 接收反馈
- 1993年底, Linux在稳定性和可靠性上与许多商业Unix不相上下
- 大多数小型Unix供应商倒闭

大教堂与集市: 开源运动的圣经

## 企业的应对

1998年, 微软内部文件(万圣节文档)认为Linux不值得担忧, 但另一方面也在谋划策略干掉Linux

1998年, 网景公司决定将网景浏览器开源, 更名为Mozilla Firefox

## 企业与开源的关系

- 企业是否可以借鉴这种开发模式?
  - 省钱, 省力, 免费的测试与开发
- 企业想要借鉴这种开发模式, 是否也必须开源自己的代码?
- 企业能做些什么?
  - 选用开源产品, 框架, 组件, 类库

## 开源社区的演进

邮件列表->集成管理平台->社交化编程(Github)

2012年, Linus公开抨击Github上提交的补丁质量太低

# 如何学习Git ---- 从产品经理的角度

- 场景引发需求

- 需求催生解决方案

- 解决方案->具体实现->新的问题

- 工具被用于新的场景

- 新的场景引发新的需求

## 版本管理的必要性

### 单人版本管理

单人修改频繁, 也需要版本管理

SVN: 每个目录下有个.svn, 优点是可以分目录管理权限

Git: 只有根目录下有一个.git, 结构简单, 效率更高

### 多人合作版本管理

Visual Source Sage: 排队改文件, 没法两个人同时改

SVN的改进: 

- 版本号: 全局自增长ID号
- 原子提交: 要么全部成功, 要么全部失败
- 分支: 两个同时进行的工作, 可以独自进行
  - 分支合并成为大问题

## 开源社区里的协作如何进行?

github之前:

- 大多数交流都在邮件列表里进行
- diff与patch
- 在邮件列表里code review
- git log里的author与committer



## 团队协作的场景下, 版本管理的关键概念

版本的含义

- 为一个阶段工作成果命名
- 隐含的质量属性:单双数,小数点,alpha,beta,final
- 方便收集bug

围绕版本的工作

- 区分两种代码提交, feature与bugfix
- 划分两种工作阶段, 特性开发期, 发布前准备期
- 第三种工作阶段: 针对某个长期维护版本, 不断打补丁

分支的含义

- 为并行工作, 提供可能
- 不同的版本定义不同的分支
- 为一组(一类)持续的工作命名与定义
- 批量汇集工作成果(Merge)

工具的演进与开发模式的演进互相影响

## Git的设计要点

- 分布式版本控制系统
  - 每个人的机器上有完整的版本系统
  - 通过remote与其他代码仓库进行交互
  - Pull Request的原始含义: 要求对面主动来pull

- SVN与Git的数据结构差异
  - SVN: 基于revision, delta的方式记录版本
  - Git: 基于快照记录版本, 每个commit保存了完整的工作区目录

Pro Git : 最好的免费教程, 第10章 git内部原理

## 开源社区如何做开发

社区: Github, 社区官网, 邮件列表, BBS, StackOverFlow

人: User, Contributer, Committer, PMC

如何观察: 入口: 社区贡献者指南

书推荐: Clean Code

## Pull Request

分支间PR, 仓库间PR --> 多个提交 --> 发起PR介绍情况 --> 经过讨论修改提交 --> 代码合入

## PR结构:

- 标题
- 内容
  - 做了什么
  - 为啥做
- 关联issue号
- 所属milestone
- 包含commits

## 社区如何评审代码?

- 是否遵循代码规范
- 是否容易理解
- 是否存在常见问题
- 是否符合项目的设计意图
- LGTM: Looks Good To Me

## 工具辅助的代码评审

Label bot

CLA check

Checks Pipeline

## 补测试用例

主动贡献测试用例, 帮助社区搭建基础测试框架

## 如何成为开源社区一份子

- 找一个感兴趣的项目
- 从阅读社区的交流记录开始
  - issue list
  - mail list
  - PR list
- 从用户做起, 下载, 编译, 安装, 使用
- 做一个合格的用户: 报告bug
- 尝试自己修复这个bug
- 尝试在社区里回答别人的问题
- 在社区里找任务, 由易到难